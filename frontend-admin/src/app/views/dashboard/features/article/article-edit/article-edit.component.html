<c-modal-header>
  <h5 cModalTitle>Article #{{ editInstance?.id }}</h5>
</c-modal-header>
<c-modal-body>
  <form [formGroup]="form" novalidate (ngSubmit)="onSave()">
    <div class="mt-3">
      <label cLabel for="title">Title</label>
      <input cFormControl id="title" formControlName="title" placeholder="Enter title" type="text" />
      <div *ngIf="formControl['title'].errors">
        <c-form-feedback class="d-block" *ngIf="formControl['title'].errors['required'] && formControl['title'].touched"
          [valid]="false">
          Title is required.
        </c-form-feedback>
      </div>
      <c-form-feedback class="d-block" *ngIf="validationErrors['title']" [valid]="false">
        {{ validationErrors['title'] }}
      </c-form-feedback>
    </div>
    <div class="mt-3">
      <label cLabel for="content">Content</label>
      <!-- <textarea cFormControl id="content" formControlName="content" rows="3"></textarea> -->
      <ckeditor [editor]="Editor" formControlName="content"></ckeditor>
      <c-form-feedback class="d-block" *ngIf="validationErrors['content']" [valid]="false">{{
        validationErrors['content']
        }}</c-form-feedback>
    </div>
    <div class="mb-3">
      <label cLabel for="subjects">Subject</label>
      <app-filterable-multiselect formControlName="subjects" id="subjects" [idField]="'id'" [textField]="'title'"
        [searchFiltersKey]="'subjects'" [allowRemoteDataSearch]="true" [useInitialLoad]="true"
        [multiple]="false"></app-filterable-multiselect>
      <c-form-feedback class="d-block" *ngIf="validationErrors['subject_id']" [valid]="false">{{
        validationErrors['subject_id']
        }}</c-form-feedback>
    </div>
    <button cButton color="primary" type="submit">Save</button>
  </form>
  <div class="mt-4">
    <ng-container *ngIf="editInstance">
      <form [formGroup]="fileForm" novalidate (ngSubmit)="onFileSave()">
        <c-row class="mb-3">
          <c-col md="6">
            <label cLabel for="featured_image">Thumbnail Image</label>
            <input cFormControl id="featured_image" placeholder="Upload file" type="file"
              (change)="onFeaturedImageChange($event)" />
            <c-form-feedback class="d-block" *ngIf="validationErrors['featured_image']" [valid]="false">{{
              validationErrors['featured_image'] }}</c-form-feedback>
            <div *ngIf="editInstance?.featured_image && editInstance?.featured_image?.url" class="">
              <img [src]="editInstance.featured_image.url" alt="" class="w-100" />
            </div>
          </c-col>
        </c-row>
        <c-row class="mb-3">
          <label cLabel for="file">Files list</label>
          <c-row>
            <c-col md="6">
              <input cFormControl id="file" placeholder="Upload file" type="file" (change)="onFileChange($event)" />
              <a *ngIf="editInstance?.file" class="badge badge-primary bg-primary" [href]="editInstance.file.url">
                {{ editInstance.file.id }}
              </a>
            </c-col>
            <c-col md="6">
              <button cButton class="btn-primary" (click)="onFileSave()">Save files</button>
            </c-col>
          </c-row>
          <c-form-feedback class="d-block" *ngIf="validationErrors['file']" [valid]="false">
            {{ validationErrors['file'] }}
          </c-form-feedback>
          <c-col></c-col>
        </c-row>
      </form>
    </ng-container>
  </div>
</c-modal-body>
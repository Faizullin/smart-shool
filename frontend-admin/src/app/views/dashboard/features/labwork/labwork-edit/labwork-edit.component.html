<c-modal-header>
    <h5 cModalTitle>Edit</h5>
</c-modal-header>
<c-modal-body>
    <form [formGroup]="form" novalidate (ngSubmit)="onSave()">
        <div class="mt-3">
            <label cLabel for="title">Title</label>
            <input cFormControl id="title" formControlName="title" placeholder="Enter title" type="text" />
            <div *ngIf="formControl['title'].errors">
                <c-form-feedback class="d-block"
                    *ngIf="formControl['title'].errors['required'] && formControl['title'].touched" [valid]="false">
                    Title is required.
                </c-form-feedback>
            </div>
            <c-form-feedback class="d-block" *ngIf="validationErrors['title']" [valid]="false">
                {{ validationErrors['title'] }}
            </c-form-feedback>
        </div>
        <div class="mb-3">
            <label cLabel for="tags">Tags</label>
            <ng-multiselect-dropdown formControlName="tags" id="tags" [placeholder]="'Select'"
                [settings]="multiselectTagDropdownSettings" [data]="current_filters.tags"
                [(ngModel)]="current_selected_filters.tags" (onSelect)="onTagItemSelect($event)"
                (onSelectAll)="onTagSelectAll($event)">
            </ng-multiselect-dropdown>
        </div>
        <div class="mb-3">
            <label cLabel for="target_audience">Role</label>
            <select cSelect formControlName="target_audience">
                <option value="student">Student</option>
                <option value="teacher">Teacher</option>
            </select>
        </div>
        <button cButton color="primary" type="submit">Submit</button>
    </form>
    <ng-container *ngIf="editInstance">
        <form>
            <c-row class="mb-3">
                <label cLabel for="files">Files</label>
                <div class="mb-4">
                    <input id="files" type="file" class="d-none" (change)="onFileUpload($event)" #fileInput>
                    <button cButton class="btn-primary" (click)="onFileUploadClick()">Upload</button>
                </div>
                <c-row>
                    <c-col>
                        <div class="d-flex flex-wrap">
                            <div *ngFor="let file_item of editInstance.files" class="col-lg-3 col-xl-2">
                                <div class="file-man-box"><a href="" class="file-close"><i
                                            class="fa fa-times-circle"></i></a>
                                    <!-- <div class="file-img-box"><img
                                            src="https://coderthemes.com/highdmin/layouts/assets/images/file_icons/pdf.svg"
                                            alt="icon"></div><a href="#" class="file-download"><i
                                            class="fa fa-download"></i></a> -->
                                    <div class="file-man-title">
                                        <h5 class="mb-0 text-overflow">{{ file_item.url }}</h5>
                                        <p class="mb-0"><small>568.8 kb</small></p>
                                    </div>
                                    <div class="mt-3">
                                        <button cButton color="danger" type="button"
                                            (click)="onFileDetach(file_item.id)">Delete</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </c-col>
                </c-row>
                <c-form-feedback class="d-block" *ngIf="validationErrors['file']" [valid]="false">
                    {{ validationErrors['file'] }}
                </c-form-feedback>
            </c-row>
        </form>
    </ng-container>
</c-modal-body>
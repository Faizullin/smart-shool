"use strict";(self.webpackChunkfrontend_admin=self.webpackChunkfrontend_admin||[]).push([[534],{1534:(S,m,i)=>{i.r(m),i.d(m,{ProjectWrokModule:()=>y});var a=i(177),f=i(4559),h=i(2583),_=i(6354),t=i(7705),l=i(4703),k=i(627);function j(o,c){if(1&o&&(t.j41(0,"td"),t.EFF(1),t.k0s()),2&o){const e=c.$implicit;t.R7$(1),t.JRh(e.label)}}function b(o,c){if(1&o&&(t.j41(0,"td"),t.EFF(1),t.k0s()),2&o){const e=c.$implicit;t.R7$(1),t.SpI("[",e.messages.join(","),"]")}}const u=function(){return{create:!1,delete:!1,edit:!1}};function v(o,c){if(1&o&&(t.j41(0,"div")(1,"div",3)(2,"div",4)(3,"app-smart-table1",5),t.DNE(4,j,2,1,"ng-template",6,7,t.C5r),t.DNE(6,b,2,1,"ng-template",8,7,t.C5r),t.k0s()()()()),2&o){const e=t.XpG();t.R7$(3),t.Y8G("data",e.check_results)("usePagination",!1)("useSearchFilters",!1)("useActions",t.lJ4(4,u))}}function g(o,c){if(1&o){const e=t.RV6();t.j41(0,"button",13),t.bIt("click",function(){t.eBV(e);const s=t.XpG(2);return t.Njj(s.onCheckDocxFile(s.files_to_check[0]))}),t.EFF(1),t.k0s()}if(2&o){const e=t.XpG(2);t.R7$(1),t.SpI(" Check ",e.files_to_check[0].name," ")}}function C(o,c){if(1&o&&(t.j41(0,"td"),t.EFF(1),t.k0s()),2&o){const e=c.$implicit;t.R7$(1),t.JRh(e.id)}}function $(o,c){if(1&o&&(t.j41(0,"td")(1,"a",14),t.EFF(2),t.k0s()()),2&o){const e=c.$implicit;t.R7$(1),t.Y8G("href",e.url,t.B4B),t.R7$(1),t.SpI(" ",e.name," ")}}function F(o,c){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",3),t.DNE(2,g,2,1,"button",9),t.j41(3,"a",10),t.bIt("click",function(){t.eBV(e);const s=t.XpG();return t.Njj(s.onProjectOpen())}),t.EFF(4,"Open project"),t.k0s(),t.j41(5,"app-smart-table1",5),t.DNE(6,C,2,1,"ng-template",11,7,t.C5r),t.DNE(8,$,3,2,"ng-template",12,7,t.C5r),t.k0s()()()}if(2&o){const e=t.XpG();t.R7$(2),t.Y8G("ngIf",e.files_to_check.length>0),t.R7$(3),t.Y8G("data",e.files)("usePagination",!1)("useSearchFilters",!1)("useActions",t.lJ4(5,u))}}let r=(()=>{class o extends h.H{constructor(){super(...arguments),this.action_urls={detail:e=>`/api/s/project-works/${e}/`,check:(e,n)=>`/api/projects/${e}/files/${n}/check/`},this.check_results=[],this.editInstance=null,this.files=[],this.files_to_check=[]}patchFormValue(e){null!==this.editInstance&&(this.files=this.editInstance.files||[],this.files_to_check=this.files.filter(n=>".docx"===n.extension))}onCheckDocxFile(e){null!==this.editInstance&&this.http.post(this.action_urls.check(this.editInstance.id,e.id),{}).pipe((0,_.T)(n=>n)).subscribe(n=>{this.check_results=n})}onProjectOpen(){window.open(`/dashboard/projects/${this.editInstance.id}/edit`,"_blank").focus()}onDownload(e){console.log("click",e)}static{this.\u0275fac=function(){let e;return function(s){return(e||(e=t.xGo(o)))(s||o)}}()}static{this.\u0275cmp=t.VBU({type:o,selectors:[["dashboard-project-work-view"]],features:[t.Vt3],decls:7,vars:3,consts:[["cModalTitle",""],[4,"ngIf"],[1,"my-6"],[1,"mt-3"],[1,"alert","alert-warning"],[3,"data","usePagination","useSearchFilters","useActions"],["columnDef","label","columnLabel","Label.","sortable","false"],["headerCellDef",""],["columnDef","messages","columnLabel","Messages.","sortable","false"],["cButton","",3,"click",4,"ngIf"],[1,"link","link-info",3,"click"],["columnDef","id","columnLabel","Id.","sortable","false"],["columnDef","name","columnLabel","Name.","sortable","false"],["cButton","",3,"click"],["download","",3,"href"]],template:function(n,s){1&n&&(t.j41(0,"c-modal-header")(1,"h5",0),t.EFF(2),t.k0s()(),t.j41(3,"c-modal-body"),t.DNE(4,v,8,5,"div",1),t.nrm(5,"hr",2),t.DNE(6,F,10,6,"div",1),t.k0s()),2&n&&(t.R7$(2),t.SpI("Project Work #",null==s.editInstance?null:s.editInstance.id,""),t.R7$(2),t.Y8G("ngIf",s.check_results.length>0),t.R7$(2),t.Y8G("ngIf",s.files.length>0))},dependencies:[a.bT,l._fv,l.Jyz,l.epl,l.L$K,k.M]})}}return o})();var I=i(8372),p=i(779),P=i(1708);function R(o,c){if(1&o&&(t.j41(0,"td"),t.EFF(1),t.k0s()),2&o){const e=c.$implicit;t.R7$(1),t.Lme("",null==e.submit_exam?null:e.submit_exam.id," ",null==e.submit_exam?null:e.submit_exam.exam_type,"")}}function E(o,c){if(1&o){const e=t.RV6();t.j41(0,"button",5),t.bIt("click",function(){t.eBV(e);const s=t.XpG().$implicit,N=t.XpG();return t.Njj(N.onResultEditOpen(s.result))}),t.EFF(1),t.k0s()}if(2&o){const e=t.XpG().$implicit;t.R7$(1),t.SpI(" See Result #",e.result.id," ")}}function D(o,c){if(1&o&&(t.j41(0,"td"),t.DNE(1,E,2,1,"button",4),t.k0s()),2&o){const e=c.$implicit;t.R7$(1),t.Y8G("ngIf",e.result)}}let V=(()=>{class o{constructor(e){this.modalService=e,this.table_title="Project Works",this.actions={list:{use:!0,url:()=>"/api/s/project-works/"},edit:{use:!0,component:r},delete:{use:!0,url:n=>`/api/s/project-works/${n}/`}},this.columns=[{header:"Id",field:"id",sortable:!0,filter:{type:"text"}},{header:"Exam",field:"submit_exam"},{header:"Result",field:"result"}]}onResultEditOpen(e){this.bsModalRef=this.modalService.show(I.J,{initialState:{id:e.id},class:"modal-lg"})}onOpenView(e){const n={};void 0!==e&&(n.id=e),this.bsModalRef=this.modalService.show(r,{initialState:n,class:"modal-lg"})}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(p.I8))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-project-work-list"]],decls:5,vars:3,consts:[[3,"title","actions","columns"],["columnDef","submit_exam"],["headerCellDef",""],["columnDef","result"],["cButton","","type","button","color","primary",3,"click",4,"ngIf"],["cButton","","type","button","color","primary",3,"click"]],template:function(n,s){1&n&&(t.j41(0,"dashboard-base-list",0),t.DNE(1,R,2,2,"ng-template",1,2,t.C5r),t.DNE(3,D,2,1,"ng-template",3,2,t.C5r),t.k0s()),2&n&&t.Y8G("title",s.table_title)("actions",s.actions)("columns",s.columns)},dependencies:[a.bT,l._fv,P.p]})}}return o})();var W=i(4662),d=i(4341),x=i(337),T=i(9304),G=i(712);const w=[{path:"list",component:V,data:{title:$localize`Projects`}},{path:"view",component:r,data:{title:$localize`Project View`}}];let y=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[W.op,l.jr_,a.MD,l.pc9,l.Emn,l.tmq,l.mCO,l.Q_q,l.tHK,d.YN,p.Q_.forRoot(),x.K,T.I,f.iI.forChild(w),d.X1,l.Dw2,l.pc9,l.EJq,l.Zic,G.W]})}}return o})()}}]);
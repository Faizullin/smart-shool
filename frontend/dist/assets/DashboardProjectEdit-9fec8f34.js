import{b as _,d as c,R as S,i as p,ai as v,j as e,F as f,L as C,aj as P,ak as D,al as b,am as j,an as y,ao as E}from"./index-33e0424c.js";import{S as u,P as w}from"./ProjectLayout-e7fee23d.js";import{d as k}from"./index-9d4c6f9e.js";const L=({projectFile:t})=>{const s=_(),{file_loading:i,projectData:a}=c(d=>d.project),{code:n,loading:o}=c(d=>d.projectScript),[r,l]=S.useState(""),x=d=>{l(d)},h=async d=>{t&&(await s(y({project_id:a.id,file_id:t.id,values:d})),await s(j({project_id:a.id,file_id:t.id})))},g=()=>{h(r)},m=async()=>{await s(P({project_id:a.id,file_id:t.id})),s(D(null)),await s(b(a.id))};return p.useEffect(()=>{n!=null&&(l(n),s(v(null)))},[n]),p.useEffect(()=>{(async()=>{a&&t&&t.extension===".cpp"&&await s(j({project_id:a.id,file_id:t.id}))})()},[t]),e.jsxs("div",{className:"h-100",children:[t&&e.jsxs("div",{className:"d-flex",children:[e.jsx(u,{onClick:g,disabled:i.post||o.post,children:e.jsx(f,{id:"save",defaultMessage:"Save"})}),e.jsx(u,{onClick:m,disabled:i.post||o.post,className:"btn-danger bg-danger",children:e.jsx(f,{id:"delete"})})]}),o.detail||o.post?e.jsx(C,{active:!0}):t?e.jsx(k,{height:"60vh",defaultLanguage:"cpp",value:r,onChange:x}):e.jsx("div",{})]})},M=()=>{const{projectData:t,project_loading:s}=c(a=>a.project),{current_file_payload:i}=c(a=>a.projectScript);return e.jsx(w,{children:!s.detail&&i&&(i.extension===".cpp"?e.jsx(L,{projectFile:i}):i.extension===".docx"?e.jsx(e.Fragment,{children:"Unsupported"}):e.jsx(E,{file:i}))})};export{M as default};
